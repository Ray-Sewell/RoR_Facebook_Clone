<p>post feed goes here</p>

<% @posts.each do |p| %>
    <div class="block">
        <p><%=p.title%></p>
        <p><%=p.body%></p>
        <% if current_user == p.author %>
            <%= link_to "delete post", p, method: :delete, data: { confirm: 'Are you sure?' }, class:"is-size-7"%>
        <% end %>
        <% p.comments.each do |c| %>
            <p><%=c.body%></p>
        <% end %>
        <% unless current_user.liked_posts.include?(p) %>
            <%= form_with(model: @like) do |form| %>
                <%= form.hidden_field :post_id, :value => p.id %>
                <%= form.hidden_field :user_id, :value => current_user.id %>
                <%= form.submit "Like", class:"button is-info"%>
            <% end %>
        <% end %>
        <% if p.likes.count > 0 %>
            <p><%= p.likes.count %> users have liked this post!</p>
        <% else %>
            <p>Be the first to like this post!</p>
        <% end %>
        <%= form_with(model: @comment) do |form| %>
            <div class="level">
                <div class="level-item">
                    <div class="field">
                        <%= form.text_field :body, class:"input", placeholder:"Comment body" %>
                    </div>
                </div>
                <%= form.hidden_field :post_id, :value => p.id %>
                <%= form.hidden_field :author_id, :value => current_user.id %>
                <div class="level-item">
                    <div class="actions">
                        <%= form.submit "Comment", class:"button is-info"%>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
<%end%>